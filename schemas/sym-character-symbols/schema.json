{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://qud.itqan.community/schemas/sym-character-symbols.json",
  "title": "SYM: Character Symbols",
  "description": "Diacritical marks, tajweed symbols, and visual rendering rules for each character",
  "type": "object",
  "required": [
    "symbol_id",
    "character_ref",
    "symbol_type",
    "symbol_codepoint"
  ],
  "properties": {
    "symbol_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this symbol instance"
    },
    "character_ref": {
      "type": "string",
      "format": "uuid",
      "description": "Foreign key to Layer 0 (Character) - The base character this symbol modifies"
    },
    "symbol_type": {
      "type": "string",
      "enum": [
        "tashkeel",
        "tajweed",
        "hamza",
        "maddah",
        "tanween",
        "shadda",
        "sukun",
        "fatha",
        "kasra",
        "damma"
      ],
      "description": "Type of diacritical symbol"
    },
    "symbol_codepoint": {
      "type": "string",
      "pattern": "^U\\+[0-9A-F]{4,6}$",
      "description": "Unicode codepoint for the diacritic (e.g., U+064E for fatha)"
    },
    "tajweed_rule": {
      "type": "string",
      "description": "Tajweed rule this symbol represents (if applicable)"
    },
    "narration_specific": {
      "type": "boolean",
      "default": false,
      "description": "Does this symbol vary by narration?"
    },
    "positional_form": {
      "type": "string",
      "enum": ["isolated", "initial", "medial", "final"],
      "description": "Rendering context for the character"
    },
    "ligature_context": {
      "type": "array",
      "items": {
        "type": "string",
        "format": "uuid"
      },
      "description": "UUIDs of characters involved if ligature (e.g., ูุง lam-alif)"
    },
    "font_variant": {
      "type": "string",
      "description": "Font-specific rendering rule (e.g., kfgqpc_hafs_uthmanic_script)"
    }
  },
  "additionalProperties": false
}
